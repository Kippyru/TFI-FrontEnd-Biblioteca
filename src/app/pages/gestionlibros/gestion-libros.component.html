<main class="max-w-6xl mx-auto p-6 bg-gray-900 text-white min-h-screen">
  <h1 class="text-3xl font-bold mb-6">ğŸ“˜ GestiÃ³n de Libros</h1>

  <section class="mb-8 bg-zinc-900/70 border border-zinc-800 rounded-xl p-6">
    <h2 class="text-xl font-semibold mb-4">Agregar nuevo libro</h2>
    <form (ngSubmit)="guardarLibro()" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input class="input" placeholder="TÃ­tulo *" [(ngModel)]="nuevoLibro.titulo" name="titulo" required />
      <input class="input" placeholder="Autor *" [(ngModel)]="nuevoLibro.autor" name="autor" required />
      <input class="input" placeholder="ISBN" [(ngModel)]="nuevoLibro.isbn" name="isbn" />
      <input class="input" placeholder="Editorial" [(ngModel)]="nuevoLibro.editorial" name="editorial" />
     <!-- <input class="input" type="number" placeholder="AÃ±o PublicaciÃ³n" [(ngModel)]="nuevoLibro.aÃ±oPublicacion" name="aÃ±oPublicacion" /> -->
      <input class="input" placeholder="GÃ©nero" [(ngModel)]="nuevoLibro.genero" name="genero" />
      <input class="input" type="number" placeholder="Cantidad Disponible" [(ngModel)]="nuevoLibro.cantidadDisponible" name="cantidadDisponible" />
      <input class="input" type="number" placeholder="Cantidad Total" [(ngModel)]="nuevoLibro.cantidadTotal" name="cantidadTotal" />

      <div class="md:col-span-2 flex justify-end mt-4">
        <button type="submit" class="btn btn-primary">ğŸ’¾ Guardar</button>
      </div>
    </form>
  </section>

  <section class="bg-zinc-900/70 border border-zinc-800 rounded-xl p-6">
    <h2 class="text-xl font-semibold mb-4">Listado de Libros</h2>

    <div *ngIf="cargando" class="text-gray-400">Cargando...</div>
    <div *ngIf="!cargando && libros.length === 0" class="text-gray-400">No hay libros registrados.</div>

    <table *ngIf="!cargando && libros.length > 0" class="w-full text-left border-collapse">
  <thead class="bg-zinc-800 text-zinc-300">
    <tr>
      <th class="p-2">TÃ­tulo</th>
      <th class="p-2">Autor</th>
      <th class="p-2">Editorial</th>
      <th class="p-2">AÃ±o</th>
      <th class="p-2">Stock</th>
      <th class="p-2 text-center">Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let libro of libros" class="border-b border-zinc-800">
      <!-- MODO EDICIÃ“N -->
      <ng-container *ngIf="libroEditando && libroEditando.id === libro.id; else vistaNormal">
        <td><input class="input" [(ngModel)]="libroEditando!.titulo" name="editTitulo{{libro.id}}" /></td>
        <td><input class="input" [(ngModel)]="libroEditando!.autor" name="editAutor{{libro.id}}" /></td>
        <td><input class="input" [(ngModel)]="libroEditando!.editorial" name="editEditorial{{libro.id}}" /></td>
     <!--   <td><input class="input" type="number" [(ngModel)]="libroEditando!.aÃ±oPublicacion" name="editAÃ±o{{libro.id}}" /></td> -->
        <td><input class="input" type="number" [(ngModel)]="libroEditando!.cantidadDisponible" name="editStock{{libro.id}}" /></td>
        <td class="flex gap-2 justify-center">
          <button class="btn btn-primary" (click)="actualizarLibro()">âœ… Guardar</button>
          <button class="btn btn-ghost" (click)="cancelarEdicion()">âŒ Cancelar</button>
        </td>
      </ng-container>

       MODO NORMAL 
      <ng-template #vistaNormal>
        <td class="p-2">{{ libro.titulo }}</td>
        <td class="p-2">{{ libro.autor }}</td>
        <td class="p-2">{{ libro.editorial || 'â€”' }}</td>
     <!--   <td class="p-2">{{ libro.aÃ±oPublicacion || 'â€”' }}</td> -->
        <td class="p-2">{{ libro.cantidadDisponible }}/{{ libro.cantidadTotal }}</td>
        <td class="flex gap-2 justify-center p-2">
          <button class="btn btn-ghost" (click)="editarLibro(libro)">âœï¸ Editar</button>
          <button class="btn btn-danger" (click)="eliminarLibro(libro.id!)">ğŸ—‘ï¸ Eliminar</button>
        </td>
      </ng-template>
    </tr>
  </tbody>
</table>
  </section>
</main>
